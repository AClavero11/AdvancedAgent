<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Reset Password&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: Arial, sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f5f5f7;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 400px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0 auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>h2 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #333;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.form-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 15px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>input {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #ddd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #0d6efd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>button:disabled {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #77a7f0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.message {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.error {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f8d7da;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #721c24;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.success {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #d4edda;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #155724;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.back-link {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #6c757d;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Step 1: Request Reset Code --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container" id="step1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2&gt;Reset Your Password&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="email"&gt;Email Address&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="email" id="email" placeholder="Enter your email"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button id="requestResetBtn"&gt;Send Reset Code&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="step1Message" class="message" style="display: none;"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;a href="index.html" class="back-link"&gt;Back to Login&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Step 2: Enter Code and New Password --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container" id="step2" style="display: none;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2&gt;Enter Reset Code&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="code"&gt;Reset Code&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="code" placeholder="Code from your email"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="newPassword"&gt;New Password&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="password" id="newPassword" placeholder="Enter new password"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="confirmPassword"&gt;Confirm Password&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="password" id="confirmPassword" placeholder="Confirm new password"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button id="resetPasswordBtn"&gt;Reset Password&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="step2Message" class="message" style="display: none;"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;a href="#" id="backToStep1" class="back-link"&gt;Back&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Elements</p>
<p class="p1"><span class="Apple-converted-space">        </span>const step1 = document.getElementById('step1');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const step2 = document.getElementById('step2');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const requestResetBtn = document.getElementById('requestResetBtn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const resetPasswordBtn = document.getElementById('resetPasswordBtn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const step1Message = document.getElementById('step1Message');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const step2Message = document.getElementById('step2Message');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const backToStep1 = document.getElementById('backToStep1');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to display messages</p>
<p class="p1"><span class="Apple-converted-space">        </span>function showMessage(element, message, isError) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>element.textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">            </span>element.className = isError ? 'message error' : 'message success';</p>
<p class="p1"><span class="Apple-converted-space">            </span>element.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Try all possible API URLs</p>
<p class="p1"><span class="Apple-converted-space">        </span>const API_URLS = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>'https://c9z46e3pgg.execute-api.us-east-2.amazonaws.com/prod/aac-api',</p>
<p class="p1"><span class="Apple-converted-space">            </span>'https://api.advanced.aero/auth',<span class="Apple-converted-space">  </span>// Example alternative URL</p>
<p class="p1"><span class="Apple-converted-space">            </span>'https://aac-api.advanced.aero'<span class="Apple-converted-space">    </span>// Another possible URL</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to make API calls with multiple fallback URLs</p>
<p class="p1"><span class="Apple-converted-space">        </span>function callApi(data, onSuccess, onError) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let currentUrlIndex = 0;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>function tryNextUrl() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (currentUrlIndex &gt;= API_URLS.length) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onError("Failed to connect to the server. Please try again later.");</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentUrl = API_URLS[currentUrlIndex];</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.log(`Trying API URL: ${currentUrl}`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const xhr = new XMLHttpRequest();</p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.open('POST', currentUrl, true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.setRequestHeader('Content-Type', 'application/json');</p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.timeout = 15000; // 15 seconds timeout</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.onload = function() {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const response = JSON.parse(xhr.responseText);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>console.log("API response:", response);</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (response.error) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onError(response.error);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onSuccess(response);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>console.error("Error parsing response:", e);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>currentUrlIndex++;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>tryNextUrl();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.onerror = function() {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>console.error("XHR error with URL:", currentUrl);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>currentUrlIndex++;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tryNextUrl();</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>xhr.ontimeout = function() {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>console.error("Request timed out with URL:", currentUrl);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>currentUrlIndex++;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tryNextUrl();</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>xhr.send(JSON.stringify(data));</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>console.error("Send error:", e);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>currentUrlIndex++;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tryNextUrl();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>tryNextUrl();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Step 1: Request Reset Code</p>
<p class="p1"><span class="Apple-converted-space">        </span>requestResetBtn.addEventListener('click', function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const email = document.getElementById('email').value.trim();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!email) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showMessage(step1Message, "Please enter your email address", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>requestResetBtn.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>requestResetBtn.textContent = "Sending...";</p>
<p class="p1"><span class="Apple-converted-space">            </span>showMessage(step1Message, "Sending reset code...", false);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>callApi(</p>
<p class="p1"><span class="Apple-converted-space">                </span>{</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestType: 'auth',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>authAction: 'forgotPassword',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>email: email</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>function(response) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Success</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestResetBtn.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestResetBtn.textContent = "Send Reset Code";</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showMessage(step1Message, "Reset code sent to your email!", false);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Store email for step 2</p>
<p class="p1"><span class="Apple-converted-space">                    </span>localStorage.setItem('resetEmail', email);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Move to step 2</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>step1.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>step2.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}, 1500);</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>function(errorMessage) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Error</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestResetBtn.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestResetBtn.textContent = "Send Reset Code";</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showMessage(step1Message, errorMessage || "Failed to send reset code. Please try again.", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Step 2: Reset Password</p>
<p class="p1"><span class="Apple-converted-space">        </span>resetPasswordBtn.addEventListener('click', function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const code = document.getElementById('code').value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const newPassword = document.getElementById('newPassword').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const confirmPassword = document.getElementById('confirmPassword').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const email = localStorage.getItem('resetEmail');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!code) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showMessage(step2Message, "Please enter the reset code", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!newPassword) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showMessage(step2Message, "Please enter a new password", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (newPassword !== confirmPassword) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showMessage(step2Message, "Passwords don't match", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!email) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showMessage(step2Message, "Email information missing. Please start over.", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>step2.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>step1.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, 1500);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>resetPasswordBtn.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>resetPasswordBtn.textContent = "Resetting...";</p>
<p class="p1"><span class="Apple-converted-space">            </span>showMessage(step2Message, "Resetting your password...", false);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>callApi(</p>
<p class="p1"><span class="Apple-converted-space">                </span>{</p>
<p class="p1"><span class="Apple-converted-space">                    </span>requestType: 'auth',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>authAction: 'confirmForgotPassword',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>email: email,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>code: code,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newPassword: newPassword</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>function(response) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Success</p>
<p class="p1"><span class="Apple-converted-space">                    </span>resetPasswordBtn.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>resetPasswordBtn.textContent = "Reset Password";</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showMessage(step2Message, "Password reset successfully!", false);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Clear stored email</p>
<p class="p1"><span class="Apple-converted-space">                    </span>localStorage.removeItem('resetEmail');</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Redirect to login page</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>window.location.href = "index.html";</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}, 1500);</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>function(errorMessage) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Error</p>
<p class="p1"><span class="Apple-converted-space">                    </span>resetPasswordBtn.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>resetPasswordBtn.textContent = "Reset Password";</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showMessage(step2Message, errorMessage || "Failed to reset password. Please try again.", true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Back button handler</p>
<p class="p1"><span class="Apple-converted-space">        </span>backToStep1.addEventListener('click', function(e) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">            </span>step2.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>step1.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Check for stored email on page load</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const email = localStorage.getItem('resetEmail');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (email) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('email').value = email;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
